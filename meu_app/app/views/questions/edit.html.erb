<div class="max-w-3xl mx-auto py-6 sm:px-6 lg:px-8">
  <div class="px-4 py-6 sm:px-0">
    <div class="bg-white shadow rounded-lg">
      <div class="px-4 py-5 sm:p-6">
        <h1 class="text-2xl font-bold text-gray-900 mb-6">Editar Pergunta</h1>

        <%= form_with model: [@quiz, @question], local: true, class: "space-y-6" do |f| %>
          <% if @question.errors.any? %>
            <div class="bg-red-50 border border-red-200 rounded-md p-4">
              <h3 class="text-sm font-medium text-red-800 mb-2">
                <%= pluralize(@question.errors.count, 'erro') %> impediram esta pergunta de ser salva:
              </h3>
              <ul class="list-disc pl-5 text-sm text-red-700 space-y-1">
                <% @question.errors.full_messages.each do |msg| %>
                  <li><%= msg %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div>
            <%= f.label :question_text, "Enunciado", class: "block text-sm font-medium text-gray-700" %>
            <%= f.text_area :question_text, rows: 4,
                class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" %>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <%= f.label :question_type, "Tipo", class: "block text-sm font-medium text-gray-700" %>
              <%= f.select :question_type, options_for_select([
                    ['Múltipla escolha','multiple_choice'],
                    ['Verdadeiro/Falso','true_false']
                  ], @question.question_type), {},
                  class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" %>
            </div>
            <div>
              <%= f.label :points, "Pontos", class: "block text-sm font-medium text-gray-700" %>
              <%= f.number_field :points, min: 1, max: 100,
                  class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" %>
            </div>
          </div>

          <div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">Opções</h3>
            <div id="options" class="space-y-3">
              <%= f.fields_for :options do |of| %>
                <div class="grid grid-cols-12 gap-2 items-center">
                  <div class="col-span-9">
                    <%= of.text_field :option_text, placeholder: "Texto da opção",
                        class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" %>
                  </div>
                  <div class="col-span-2 flex items-center space-x-2">
                    <%= of.check_box :is_correct, class: "h-4 w-4 text-green-600" %>
                    <%= of.label :is_correct, "Correta", class: "text-sm text-gray-700" %>
                  </div>
                  <div class="col-span-1 text-right">
                    <%= of.check_box :_destroy %>
                    <%= of.label :_destroy, "Remover", class: "text-xs text-red-600" %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>

          <div class="flex justify-between">
            <%= link_to "Voltar", quiz_path(@quiz), class: "bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded" %>
            <%= f.submit "Salvar", class: "bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
